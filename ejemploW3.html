<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo W3.js</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://www.w3schools.com/lib/w3.js"></script>
</head>
<body>

<h2>Testing W3.JS in HTML</h2>

<table id="id01">
  <tr>
    <th>TITULO</th>
    <th>PAGV</th>
    <th>AUTOR</th>
    <th>ANIO</th>
    <th>PRIMERA</th>
    <th>SEGUNDA</th>
  </tr>
  <tr w3-repeat="datitos">
    <th>{{TITULO}}</th>
    <th>{{PAGV}}</th>
    <th>{{AUTOR}}</th>
    <th>{{ANIO}}</th>
    <th>{{PRIMERA}}</th>
    <th>{{SEGUNDA}}</th>
  </tr>
</table>

<script>
// Supongamos que 'data' es el objeto JSON que obtuviste
function replaceNullsWithEmptyStrings(obj) {
    for (const key in obj) {
        if (obj[key] === null) {
            obj[key] = ''; // Reemplaza null con una cadena vacía
        }
    }
}
// Hacer un fetch del JSON
fetch('https://kudomarkos.github.io/maldiciones/output/otroLupastro.json')
    .then(response => {
        // Verificar si la respuesta es correcta
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json(); // Parsear la respuesta como JSON
    })
    .then(dataList => {
        // Estructurar los datos en el formato deseado
        var data = { "datitos": dataList };
        // Reemplazar nulls con cadenas vacías
        data.datitos.forEach(replaceNullsWithEmptyStrings);
        // Usar w3.displayObject para mostrar los datos
        w3.displayObject("id01", data);
    })
    .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
    });
</script>

</body>
</html>

